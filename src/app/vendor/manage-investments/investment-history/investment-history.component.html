<div class="card">
  	<div class="card-body" style="padding:0px;">
    	<div class="">
    		<div class="">
    			<div class="">
    				<tabset>
		          <tab heading="Manage Investment">
			            <div class="">
                      <form [formGroup] = "investmentFilterForm" (ngSubmit) = "filter_investment_history(investmentFilterForm.value)">
                        <div class="row">
                            <div class="col-md-3">
                              <div class="form-group">
                                <label>From</label>
                                <input type="date" formControlName = "from" class="form-control" name=""> 
                              </div>
                            </div>
                            <div class="col-md-3">
                              <div class="form-group">
                                <label>To</label>
                                <input type="date" formControlName = "to" class="form-control" name="">
                              </div>
                            </div>
                            <div class="col-md-3">
                            	<div class="form-group">
                            		<label>Investment Plan</label>
	                                <select class="form-control" placeholder="type" formControlName = "investmentplan_id">
	                                    <option selected="false">Type</option>
	                                    <option value="{{plan.id}}" *ngFor="let plan of investment_plan_list">{{ plan?.name }}</option>
	                                </select>
                            	</div>
                            </div>
                            <div class="col-md-3">
                              <div class="form-group">
                                <label>Transaction Type</label>
                                <select class="form-control" formControlName = "transaction_type">
                                    <option selected="false" value="">Type</option>
                                    <option value="1">credit</option>
                                    <option value="2">debit</option>
                                </select>
                              </div>
                            </div>
                            <div class="col-md-3">
                              <div class="form-group">
                                <button type="submit" class="btn btn-primary btn-block" [disabled]="investmentFilterForm.invalid || investment_history_loader">
                                 Filter</button>
                              </div>
                            </div>
                          </div>
                      </form>
                    </div>
	            	<div class=" mt-3 mb-4">
			           <button (click)="exportTable('xls', 'investment_history')" class="btn btn-outline btn-success">Export table</button>
			           <button class="btn btn-outline btn-success ml-2" (click)="printReciept('investment_history')">Print</button>
			       	</div>
			       	<div>
					<mat-progress-spinner *ngIf="investment_history_loader" style="margin:auto;" mode="indeterminate" value=""></mat-progress-spinner>
					</div>
		        <table id="investment_history" *ngIf="!investment_history_loader" class="table table-responsive table-hover table-outline mb-0" width="100%">
                    <thead>
                        <tr>
                            <th>Trans ID</th>
                            <th>Member</th>
                            <th>Investment Plan</th>
                            <th>Amount</th>
                            <th>Status</th>
                            <th>Date</th>
                            <th>Pre-Post</th>
                            <th>Posted</th>
                            <th>Action</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr class="" *ngFor="let item of inv_history_list">
                            <td>#{{ item?.transaction_id }}</td>
                            <td>
                               {{ item?.member?.first_name }} 
                               {{ item?.member?.last_name }} 
                               {{ item?.member?.middle_name }} 
                            </td>
                            <td>
                               {{ item?.investment_plan?.name }} 
                            </td>
                            <td>
                               <i *ngIf="item.transaction_type == 1" style="color: green">+{{ item?.amount | number }}</i>
                               <i *ngIf="item.transaction_type == 2" style="color: red">-{{ item?.amount | number }}</i>
                            </td>
                              <td>
                                <mat-chip-list>
				                    <mat-chip *ngIf="item.status==1" color="primary" selected="true">Posted</mat-chip>
				                    <mat-chip *ngIf="item.status==0" color="accent" selected="true">Pending</mat-chip>
				                    <mat-chip *ngIf="item.status==2" color="warn" selected="true">Cancelled</mat-chip>
				                </mat-chip-list>
                            </td>
                            <td>
                                {{item?.date | date: 'shortDate'}} 
                            </td>
                            <td class="center">
                            	{{ item?.staff?.first_name }} 
                            	{{ item?.staff?.last_name }} 
                            	{{ item?.staff?.middle_name }} 
                            </td>
                            <td class="center">
                            	{{ item?.approved_by?.first_name }} 
                            	{{ item?.approved_by?.last_name }}
                            </td>
                            <td>
                            	<mat-menu #appMenu="matMenu">
                        		<mat-progress-bar *ngIf="btn_loader" mode="indeterminate"></mat-progress-bar>
								  <button [hidden]="item.status > 0" (click)="post_transaction(item.id, 1)" mat-menu-item>Post Transaction</button>
									<button *ngIf="item.status != 2" (click)="post_transaction(item.id, 2)" mat-menu-item>Cancel Transaction</button>
								</mat-menu>

								<button *ngIf="localService.check_posting_cash_role(item.amount)" mat-icon-button [matMenuTriggerFor]="appMenu">
								  <mat-icon>more_vert</mat-icon>
								</button>
                            </td>
                        </tr>
                    </tbody>
                </table>
                <div class="load-more mt-3 mb-3">
                   <a  (click)="loadMore()" class="btn btn-success" style="cursor: pointer;"><i *ngIf="loader" class="fa fa-spinner"></i>Load more... </a>
                </div>
            </tab>
        </tabset>
    </div>
            </div>
    	</div>
    </div>
</div>
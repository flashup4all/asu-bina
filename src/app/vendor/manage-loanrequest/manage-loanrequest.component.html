<div class="card">
    <div class="card-body">
        <div class="row">
            <div class="col">
                <tabset>
                  <tab heading="Manage Loan Request">
                        <div class="col-md-12">
                            <table class="table table-responsive-sm table-hover table-outline mb-0" width="100%">
                                <thead>
                                    <tr>
                                        <th>#</th>
                                        <th>Name</th>
                                        <th>Loan Type</th>
                                        <th>Amount</th>
                                        <th>Monthly Deductions</th>
                                        <th>Repayment Method</th>
                                        <th>Duration(Months)</th>
                                        <th>Date</th>
                                        <th>Status</th>
                                        <th>Actions</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr class="" *ngFor="let item of loanRequestList">
                                        <td><input type="checkbox" name=""></td>
                                        <td>
                                            {{item.member.first_name}} 
                                            {{item.member.last_name}} 
                                            {{item.member?.middle_name}} 
                                            </td>
                                        <td>
                                            {{item.type.loan_type}} 
                                        </td>
                                        <td>
                                            {{item.amount}} 
                                        </td>
                                        <td>
                                            {{item.monthly_deductions | number:'.2'}} 
                                        </td>
                                        <td>
                                            {{item.repayment_method}} 
                                        </td>
                                        <td>
                                            {{item.type.duration}} 
                                        </td>
                                          <td>
                                            {{item.created_at}} 
                                        </td>
                                          <td>
                                            {{item.status}} 
                                        </td>
                                        <td class="center">
                                            <div class="btn-group" dropdown>
                                              <button dropdownToggle type="button" class="btn btn-primary dropdown-toggle">
                                                <i class="fa fa-ellipsis-v"></i><span class="caret"></span>
                                              </button>
                                              <ul *dropdownMenu class="dropdown-menu" role="menu">
                                                <li role="menuitem">
                                                    <a class="dropdown-item" type="button" (click)="requestHistory(item.id)">
                                                        <i class="fa fa-check">Request History</i>
                                                    </a></li>
                                                <li role="menuitem">
                                                    <a class="dropdown-item" (click)="approveLoanRequest(item.id)">
                                                        <i class="fa fa-check"> Approve Request</i>
                                                    </a></li>
                                                <li role="menuitem" *ngIf="item.status == 'approved'">
                                                    <a class="dropdown-item" (click)="paymentModal.show()">
                                                        <i class="fa fa-check"> Pay Now</i>
                                                    </a>
                                                </li>
                                                <li role="menuitem" *ngIf="item.status != 'cancelled'">
                                                    <a class="dropdown-item" (click)="cancelLoanRequest(item.id)">
                                                        <i class="fa fa-times"> Cancel Request</i>
                                                    </a>
                                                </li>
                                                <li role="menuitem" *ngIf="item.status == 'cancelled'">
                                                    <a class="dropdown-item" (click)="deleteLoanRequest(item.id)" >
                                                        <i class="fa fa-trash-o"> Delete</i>
                                                    </a>
                                                </li>
                                              </ul>
                                            </div>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                            <div class="col-md-12 load-more">
                               <a  (click)="loadMore()" style="cursor: pointer;"><i *ngIf="loader" class="fa fa-spinner"></i>Load more... </a>
                            </div>
                        </div>
                    </tab>
                </tabset>
            </div>
        </div>
    </div>
</div>

<!-- new staff position modal -->
<div bsModal #paymentModal="bs-modal" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="mySmallModalLabel" aria-hidden="true">
	 <div class="modal-dialog modal-lg">
	   <div class="modal-content">
	     <div class="modal-header">
	       <h4 class="modal-title pull-left">New Staff Position</h4>
	       <button type="button" class="close pull-right" aria-label="Close" (click)="paymentModal.hide()">
	         <span aria-hidden="true">&times;</span>
	       </button>
	     </div>
	     <div class="modal-body">
	       <div class="" style="padding: 20px">
    <div class="row">
    	 <div class="col-xs-12 col-md-6" style="font-size: 12pt; line-height: 2em;">
            
            	<h1>Features:</h1>
                <ul>
                    <li>As-you-type, input formatting</li>
                    <li>Form field validation (also as you type)</li>
                    <li>Graceful error feedback for declined card, etc</li>
                    <li>AJAX form submission w/ visual feedback</li>
                    <li>Creates a Stripe credit card token</li>
                </ul>
            
            <p>Be sure to replace the dummy API key with a valid Stripe API key.</p>
            
            <p>Built upon: Bootstrap, jQuery, 
                <a href="http://jqueryvalidation.org/">jQuery Validation Plugin</a>, 
                <a href="https://github.com/stripe/jquery.payment">jQuery.payment library</a>,
                and <a href="https://stripe.com/docs/stripe.js">Stripe.js</a>
            </p>
        </div>
        <div class="col-xs-12 col-md-6">
            <div class="panel panel-default credit-card-box">
                <div class="panel-heading display-table" >
                    <div class="row display-tr" >
                        <h3 class="panel-title display-td" >Payment Details </h3>
                                 <img class="pull-right img-responsive pull-right" src="http://i76.imgup.net/accepted_c22e0.png">                  
                            
                        
                    </div>                    
                </div>
                <div class="panel-body">
                    <form role="form" id="payment-form">
                        <div class="">
                            <div class="col-xs-12">
                                <div class="form-group">
                                    <label for="cardNumber">CARD NUMBER</label>
                                    <div class="input-group">
                                        <input 
                                            type="tel"
                                            class="form-control"
                                            name="cardNumber"
                                            placeholder="Valid Card Number"
                                            autocomplete="cc-number"
                                            required autofocus 
                                        />
                                        <span class="input-group-addon"><i class="fa fa-credit-card"></i></span>
                                    </div>
                                </div>                            
                            </div>
                        </div>
                        <div class="">
                            <div class="col-xs-7 col-md-7">
                                <div class="form-group">
                                    <label for="cardExpiry"><span class="hidden-xs">EXPIRATION</span><span class="visible-xs-inline">EXP</span> DATE</label>
                                    <input 
                                        type="tel" 
                                        class="form-control" 
                                        name="cardExpiry"
                                        placeholder="MM / YY"
                                        autocomplete="cc-exp"
                                        required 
                                    />
                                </div>
                            </div>
                            <div class="col-xs-5 col-md-5 pull-right">
                                <div class="form-group">
                                    <label for="cardCVC">CV CODE</label>
                                    <input 
                                        type="tel" 
                                        class="form-control"
                                        name="cardCVC"
                                        placeholder="CVC"
                                        autocomplete="cc-csc"
                                        required
                                    />
                                </div>
                            </div>
                        </div>
                        <div class="">
                            <div class="col-xs-12">
                                <button class="subscribe btn btn-success btn-lg btn-block" type="button">Start Subscription</button>
                            </div>
                        </div>
                        <div class="" style="display:none;">
                            <div class="col-xs-12">
                                <p class="payment-errors"></p>
                            </div>
                        </div>
                    </form>
                </div>
            </div>            
            <!-- CREDIT CARD FORM ENDS HERE -->
            
            
        </div>                    
    </div>
</div>
	     </div>
	   </div>
	 </div>
</div>
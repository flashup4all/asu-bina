<div class="card">
    <div class="card-body" >
        <div class="profile-head media" style="padding-bottom: 20px;">
            <a class="col-md-3 pull-left">
                <img *ngIf="member?.passport ==''" class="rounded-circle" src="assets/images/avata.png">
                <img *ngIf="member?.passport != ''" title="{{member?.first_name}} {{member?.middle_name}} {{member?.last_name}}" src="{{image_url}}{{member?.passport}}" class="img-avatar" style="width: 150px; height: 150px;">
                <!-- <img *ngIf="member?.passport" class="rounded-circle" style="width: 150px; height: 150px;" [src]="sanitizer.bypassSecurityTrustUrl(member.passport) || assets/images/avata.png"> -->
            </a>
            <div class="col-md-9">
                <h2>
                    {{member?.first_name}} 
                    {{member?.last_name}} 
                    {{member?.middle_name}} 
                </h2>
                <p class="profile-brief">
                    {{member?.email}}
                </p>
                <!--  <p *ngIf="!vendor.description" class="profile-brief">
                    Description
                </p> -->
                <div class="profile-details muted">
                    <h3 *ngIf="member?.contribution > 0"><a class="btn pull-left"><i class="fa fa-money shaded"></i> Contribution : &#8358;  {{member?.contribution | number }} </a></h3>
                    <h3><a class="btn"><i class="fa fa-phone shaded"></i> {{member?.phone1}}, {{member?.phone2}} </a></h3>
                </div>
                <div class="profile-details muted">
                    <h3><a class="btn pull-left"><i class="fa fa-balance-scale shaded"></i> Contribution Balance:<span class="label label-sm label-success"> &#8358; {{ actual_balance | number }} </span></a></h3>
                    <!-- <h3><a class="btn pull-left"><i class="fa fa-balance-scale shaded"></i> 
                        Total Deduction: <span class="label label-sm label-danger"> &#8358; {{ total_deduction || 0 }} </span></a></h3>
                     <h3><a class="btn"><i class="fa fa-phone shaded"></i> {{member?.phone2}} </a></h3>  -->
                </div>
                <div class="profile-details muted">
                    <h3 *ngIf="member?.account_number != ''"><a class="btn pull-left"><i class="fa fa-money shaded"></i> Account No. : {{ member?.account_number }} </a></h3>
                </div>
            </div>
        </div>
        <div class="row">
                <div class="col">
                    <tabset>
                        <tab heading="Profile">
                          <div class="row">
                            <div class="col-md-6">

                              <div class="row">
                                  <label class="col-sm-3">Account Number</label>
                                  <div class="col-sm-9">
                                      <p>{{member?.account_number}}</p>
                                  </div>
                              </div>
                              <div class="row">
                                  <label class="col-sm-3">First Name</label>
                                  <div class="col-sm-9">
                                      <p>{{member?.first_name}}</p>
                                  </div>
                              </div>
                               <div class="row">
                                  <label class="col-sm-3">Middle Name</label>
                                  <div class="col-sm-9">
                                      <p>{{member?.middle_name ? member?.middle_name : ''}}</p>
                                  </div>
                              </div>
                              <div class="row">
                                  <label class="col-sm-3">Last Name</label>
                                  <div class="col-sm-9">
                                      <p>{{member?.last_name}}</p>
                                  </div>
                              </div>
                              <div class="row">
                                  <label class="col-sm-3">Email</label>
                                  <div class="col-sm-9">
                                      <p>{{member?.email}}</p>
                                  </div>
                              </div>
                              <div class="row">
                                  <label class="col-sm-3">Contribution</label>
                                  <div class="col-sm-9">
                                      <p>{{member?.contribution  | number }}</p>
                                  </div>
                              </div>
                               <h4>Custom</h4>
                              <hr>
                              <div class="row" *ngFor="let item of member?.members">
                                  <label class="col-sm-3">{{item?.key}}</label>
                                  <div class="col-sm-9">
                                      <p>{{item?.information}}</p>
                                  </div>
                              </div>
                          </div>
                         
                          </div>
                        </tab>
                        <tab heading="Edit Profile">
                          <div class="row">
                            <div class="col-md-6">
                                <form #form="ngForm" (ngSubmit)="updateMember(form.value, member.id)">
                                  <div class="form-group">
                                      <label *ngIf="user?.role_id == 2">Account No: {{ member?.account_number }} 
                                      </label>
                                      <p class="pull-right" style="
     cursor: pointer; color: blue;">
                                          <i class="fa fa-edit" (click)="allow_edit_acc_no = !allow_edit_acc_no">edit</i>
                                        </p>
                                  </div>
                                  <div class="form-group" *ngIf="allow_edit_acc_no">
                                    <label>Account_no:</label>
                                    <input  type="text" class="form-control" [ngModel]="member?.account_number" name="account_number" ngModel>
                                  </div>
                                      <div class="form-group">
                                          <label>Surname:</label>
                                        <input type="text" class="form-control" [ngModel]="member?.first_name" name="first_name" ngModel>
                                      </div>
                                      <div class="form-group">
                                        <label>Middle Name:</label>
                                        <input type="text" class="form-control" [ngModel]="member?.middle_name" name="last_name" ngModel>
                                      </div>
                                      <div class="form-group">
                                        <label>Last Name:</label>
                                      <input type="text" class="form-control" [ngModel]="member?.last_name" name="middle_name" ngModel>
                                      </div>
                                      <div class="form-group">
                                        <label>Email:</label>
                                      <input type="text" class="form-control" [ngModel]="member?.email" name="email" ngModel>
                                      </div>
                                      <div class="form-group">
                                        <label>Contribution:</label>
                                      <input type="text" class="form-control" [ngModel]="member?.contribution" name="contribution" ngModel>
                                      </div>
                                      <div class="form-group">
                                        <label>Mobile Number:</label>
                                        <input type="text" class="form-control" [ngModel]="member?.phone1" value="" name="phone1" ngModel>
                                      </div>
                                      <div class="form-group">
                                        <label>Gender:</label>
                                        <select class="form-control" [ngModel]="member?.gender" value="" name="gender" ngModel>
                                          <option value="Male">Male</option>
                                          <option value="Female">Female</option>
                                        </select>
                                      </div>
                                      <div class="form-group">
                                        <label>Date of Birth:</label>
                                        <input type="date" class="form-control" [ngModel]="member?.date_of_birth" value="" name="date_of_birth" ngModel>
                                      </div>
                                      <div class="form-group">
                                        <label class="control-label" for="basicinput">Passport</label>
                                            <!-- <img *ngIf="!file_srcs[0]" src="assets/images/avata.png">
                                            <img [attr.src]='file_srcs[0]' *ngIf="file_srcs[0]" alt="" width="250px" height="250px" /> -->
                                            <!-- <input type="file" name="" (change)="fileChange(input)" #input> -->
                                            <input type="file" id="avatar" (change)="onFileChange($event)" #fileInput>
                                            <button type="button" class="btn btn-sm btn-default" (click)="clearFile()">clear file</button>
                                      </div>
                                    <h4>Custom Form Field</h4>
                                    <div ngModelGroup="member_details" class="control-group" *ngFor="let item of membersFormPoolList;  let i = index; ">
                                    <label class="control-label">{{item.label}}</label>
                                    <div *ngFor="let mem of member?.members">
                                        
                                        <div class="form-group" *ngIf="item.label === mem.key">
                                            <input type="text" *ngIf="item.type =='text'" ngModel placeholder="" [ngModel]="mem?.information" name="{{mem.id}}" class="form-control">
                                            <textarea class="form-control" name="{{mem.id}}"  *ngIf="item.type =='textarea'" [ngModel]="mem?.information" ngModel></textarea>
                                        </div>
                                    </div>
                                    </div>
                                      <button type="submit" class="btn btn-primary btn-block" [disabled]="form.invalid || submitPending ">
                                        <span *ngIf="!submitPending">Update</span>
                                        <span *ngIf="submitPending && form.valid">Please Wait...</span>
                                        <span *ngIf="submitPending && form.valid" class="fa fa-spinner" aria-hidden="true"></span>
                                    </button>
                                </form>
                            </div>
                             <div class="col-md-6">
                              <!-- <app-member-account-officer></app-member-account-officer> -->
                            </div>
                          </div>
                        </tab>
                        <tab heading="CONTRIBUTIONS">
                          <app-member-contributions></app-member-contributions>
                        </tab>
                        <tab heading="WITHDRAWAL">
                            <div class="container p-2">
                                   <button (click)="exportTable('xls', 'withdrawal_table')" class="btn btn-outline btn-success">Export table</button>
                                   <button class="btn btn-outline btn-success" (click)="printReciept('withdrawal_table')">Print</button>
                                   <button type="button" class="btn btn-primary pull-right" (click)="newWithdrawalModal.show()"> Make a Withdrawal</button>
                               </div>
                                <table id="withdrawal_table" class="table table-responsive-sm table-hover table-outline mb-0" width="100%">
                                    <thead>
                                        <tr>
                                            <th>Trans ID</th>
                                            <th>Name</th>
                                            <th> &#8358; Amount</th>
                                            <!-- <th>Type</th> -->
                                            <th>Status</th>
                                            <th>Date</th>
                                            <th>Actions</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr class="" *ngFor="let item of withdrawal_list">
                                            <td>#00{{ item?.id }}</td>
                                            <td>
                                                {{item?.member?.first_name}} 
                                                {{item?.member?.last_name}} 
                                                {{item?.member?.middle_name}} 
                                            </td>
                                           
                                            <td>
                                               {{ item?.amount  | number }}  
                                            </td>
                                           <!--  <td>
                                               {{item?.type?.name}}  
                                            </td> -->
                                              <td>
                                                <span *ngIf="item.status == 0" class="badge badge-warning">Pending </span>
                                                <span *ngIf="item.status == 2" class="badge badge-danger">Cancelled </span>
                                                <span *ngIf="item.status == 1" class="badge badge-success">Approved </span>
                                            </td>
                                            <td>
                                                {{item?.created_at | date: 'shortDate'}} 
                                            </td>
                                            <td class="center">
                                              <mat-menu #appMenu="matMenu">
                                                <button [swal]="approve_request" [disabled]="btn_loader" mat-menu-item *ngIf="item.status==0">Approve Request</button>
                                                <mat-progress-bar *ngIf="btn_loader" mode="indeterminate"></mat-progress-bar>
                                                <button [swal]="cancel_request" [disabled]="btn_loader" mat-menu-item *ngIf="item.status == 0 ">Cancel Request</button>
                                                <swal
                                                  #approve_request
                                                  title="Are You Sure You want to Approve this Withdrawal?"
                                                  text="This cannot be undone"
                                                  type="warning"
                                                  [showCancelButton]="true"
                                                  [focusCancel]="true"
                                                  (confirm)="approveWidthdrawalRequest(item.id)">
                                                </swal>
                                                <swal
                                                  #cancel_request
                                                  title="Are You Sure You want to Cancel this Withdrawal?"
                                                  text="This cannot be undone"
                                                  type="warning"
                                                  [showCancelButton]="true"
                                                  [focusCancel]="true"
                                                  (confirm)="cancelWidthdrawalRequest(item.id)">
                                                </swal>
                                              </mat-menu>

                                              <button *ngIf="item.status != 2 && localService.check_posting_cash_role(item.amount)" mat-icon-button [matMenuTriggerFor]="appMenu">
                                                <mat-icon>more_vert</mat-icon>
                                              </button>
                                          </td>
                                        </tr>
                                        <tr>
                                            <td colspan="3">Total</td>
                                            <td>{{ total_contribution_amount | number }}</td>
                                            <td></td>
                                        </tr>
                                    </tbody>
                                </table>
                        </tab>
                        <tab heading="DEDUCTIONS">
                             <p>Generate Report by Date</p>
                            <div class="row">
                                  <form [formGroup] = "deductionFilterForm" (ngSubmit) = "filterDeduction(deductionFilterForm.value)" style="width: 100%;">
                                    <div class="row p-1">
                                        <div class="col-md-4">
                                          <div class="form-group">
                                            <label>From</label>
                                            <input type="date" formControlName = "from" class="form-control" name=""> 
                                          </div>
                                        </div>
                                        <div class="col-md-4">
                                          <div class="form-group">
                                            <label>To</label>
                                            <input type="date" formControlName = "to" class="form-control" name="">
                                          </div>
                                        </div>
                                        <div class="col-md-4">
                                          <div class="form-group">
                                            <label>Running Loan(s)</label>
                                                <select class="form-control" placeholder="loan_request_id" formControlName = "loan_request_id">
                                                    <option value="">none</option>
                                                    <option value="{{ item.id }}" *ngFor="let item of memberLoanRequestList">{{ item?.type?.loan_type}} (bal: = {{item?.amount + percentage_to_amount(item.amount, item.type.interest) - (totalDeductions(item.deductions_per_loan))}})</option>
                                                </select>
                                          </div>
                                        </div>
                                        <div class="col-md-4">
                                          <div class="form-group">
                                            <label>Type</label>
                                            <select class="form-control" placeholder="type" formControlName = "repayment_method">
                                                <option value="">Type</option>
                                                <option value="{{item.id}}" *ngFor="let item of deduction_type_list">{{ item?.name }}</option>
                                            </select>
                                          </div>
                                        </div>
                                        <div class="col-md-4">
                                          <div class="form-group">
                                            <button type="submit" class="btn btn-primary" style="margin-top:30px" [disabled]="deductionFilterForm.invalid && !submitPending">
                                              <span *ngIf="submitPending && deductionFilterForm.valid">Please Wait...</span>
                                              <span *ngIf="submitPending && deductionFilterForm.valid"><i class="fa fa-spinner"></i></span>
                                              <span *ngIf="!submitPending">Filter</span>
                                            </button>
                                             <button type="button" class="btn btn-primary" (click)="newRepaymentModal.show()" style="margin-top: 30px;"> Make a Repayment</button>
                                          </div>
                                        </div>
                                      </div>
                                  </form>
                                  <div class="container p-2">
                                      <button (click)="exportTable('xls', 'deductions_table')" class="btn btn-outline btn-success">Export table</button>
                                      <button class="btn btn-outline btn-success" (click)="printReciept('deductions_table')">Print</button>
                                  </div>
                                    <table id="deductions_table" class="table table-responsive-sm table-hover table-outline mb-0" width="100%">
                                    <thead>
                                        <tr>
                                            <th>#</th>
                                            <th>Loan Type</th>
                                            <th>Method</th>
                                            <th>&#8358; Deducted</th>
                                            <th>Date</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr class="" *ngFor="let item of memberLoanDeductionsList">
                                            <td>00{{ item?.id }}</td>
                                            <td>
                                                {{item?.type.loan_type}} 
                                            </td>
                                            <td>
                                                {{item?.repayment_method?.name }} 
                                            </td>
                                            <td>
                                                {{item?.amount_deducted | number }} 
                                            </td>
                                              <td>
                                                {{item?.created_at | date : 'shortDate'}} 
                                            </td>
                                        </tr>
                                        <tr>
                                            <td colspan="3">Total</td>
                                            <td>{{ total_deduction_amount | number }}</td>
                                            <td></td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </tab>
                        <tab heading="LOAN REQUEST">
                            <div class="row">
                                <div class="col-md-12">
                                     <form [formGroup] = "loanrequestFilterForm" (ngSubmit) = "filterLoanRequest(loanrequestFilterForm.value)" style="width: 100%;">
                                    <div class="row p-1">
                                        <div class="col-md-3">
                                          <div class="form-group">
                                            <label>From</label>
                                            <input type="date" formControlName = "from" class="form-control" name=""> 
                                          </div>
                                        </div>
                                        <div class="col-md-3">
                                          <div class="form-group">
                                            <label>To</label>
                                            <input type="date" formControlName = "to" class="form-control" name="">
                                          </div>
                                        </div>
                                        <div class="col-md-3">
                                          <div class="form-group">
                                            <label>Running Loan(s)</label>
                                                <select class="form-control" placeholder="loan_request_id" formControlName = "loan_request_id">
                                                    <option value="">none</option>
                                                    <option value="{{ item.id }}" *ngFor="let item of memberLoanRequestList">{{ item?.type?.loan_type}} (bal: = {{item?.amount + percentage_to_amount(item.amount, item.type.interest) - (totalDeductions(item.deductions_per_loan))}})</option>
                                                </select>
                                          </div>
                                        </div>
                                        <div class="col-md-3">
                                          <div class="form-group">
                                            <label>Type</label>
                                            <select class="form-control" placeholder="type" formControlName = "repayment_method">
                                                <option value="">Type</option>
                                                <option value="{{item.id}}" *ngFor="let item of deduction_type_list">{{ item?.name }}</option>
                                            </select>
                                          </div>
                                        </div>
                                        <div class="col-md-4">
                                          <div class="form-group">
                                            <button type="submit" class="btn btn-primary" style="margin-top:30px" [disabled]="loanrequestFilterForm.invalid && !submitPending">
                                              <span *ngIf="submitPending && loanrequestFilterForm.valid">Please Wait...</span>
                                              <span *ngIf="submitPending && loanrequestFilterForm.valid"><i class="fa fa-spinner"></i></span>
                                              <span *ngIf="!submitPending">Filter</span>
                                            </button>
                                          </div>
                                        </div>
                                      </div>
                                  </form>
                                </div>
                                <div class="container p-2">
                                      <button (click)="exportTable('xls', 'loan_table')" class="btn btn-outline btn-success">Export table</button>
                                      <button class="btn btn-outline btn-success" (click)="printReciept('loan_table')">Print</button>
                                      <button type="button" class="btn btn-success pull-right" (click)="newLoanRequestModal.show()"style="margin-top:30px" >
                                                <i class="fa fa-plus"></i> 
                                            Make A Loan Request
                                            </button>
                                  </div>
                                <table id="loan_table" class="table table-responsive-sm table-hover table-outline mb-0" width="100%">
                                    <thead>
                                        <tr>
                                            <th>#</th>
                                            <!-- <th>Name</th> -->
                                            <th>Loan Type (interest %)</th>
                                            <th>&#8358; Amount + interest</th>
                                            <th>&#8358; Monthly Deductions</th>
                                            <th>&#8358; Paid</th>
                                            <th>Repayment Method</th>
                                            <th>Duration(Months)</th>
                                            <th>Date</th>
                                            <th>Status</th>
                                            <th>Actions</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr class="" *ngFor="let item of memberLoanRequestList">
                                            <td>00{{ item?.id }}</td>
                                            <!-- <td>
                                                {{item.member.first_name}} 
                                                {{item.member.last_name}} 
                                                {{item.member?.middle_name}} 
                                                </td> -->
                                            <td>
                                                {{item?.type?.loan_type}} ({{ item?.type?.interest }}%)
                                            </td>
                                            <td>
                                                {{item?.amount + percentage_to_amount(item.amount, item.type.interest)  | number }} 
                                            </td>
                                            <td>
                                                {{ item?.monthly_deductions | number }} 
                                            </td>
                                            <td>
                                                {{ totalDeductions(item.deductions_per_loan) | number }}
                                            </td>
                                            <td>
                                                {{item?.repayment_method?.name }} 
                                            </td>
                                            <td>
                                                {{item?.type.duration}} 
                                            </td>
                                              <td>
                                                {{item?.created_at | date: 'shortDate'}} 
                                            </td>
                                              <td>
                                                {{item?.status}} 
                                            </td>
                                            <td class="center">
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </tab>
                        <tab heading="INVESTMENTS">
                          <app-member-investments></app-member-investments>
                        </tab>
                        <tab heading="TARGET SAVINGS">
                            <div class="row">
                                <div class="col-md-12">
                                     <form [formGroup] = "filterForm" (ngSubmit) = "filterTargetSavings(filterForm.value)" style="width: 100%;">
                                    <div class="row p-1">
                                        <div class="col-md-4">
                                          <div class="form-group">
                                            <label>From</label>
                                            <input type="date" formControlName = "from" class="form-control" name=""> 
                                          </div>
                                        </div>
                                        <div class="col-md-4">
                                          <div class="form-group">
                                            <label>To</label>
                                            <input type="date" formControlName = "to" class="form-control" name="">
                                          </div>
                                        </div>
                                        <div class="col-md-4">
                                          <div class="form-group">
                                            <!-- <button type="button" class="btn btn-primary" style="margin-top: 30px;" (click)="show_adv_form()"><i class="fa fa-filter"></i></button> -->
                                            <button type="submit" class="btn btn-primary" style="margin-top:30px" [disabled]="filterForm.invalid && !submitPending">
                                              <span *ngIf="submitPending && filterForm.valid">Please Wait...</span>
                                              <span *ngIf="submitPending && filterForm.valid"><i class="fa fa-spinner"></i></span>
                                              <span *ngIf="!submitPending">Filter</span>
                                            </button>
                                            <button type="button" class="btn btn-success pull-right" (click)="newTargetSavingModal.show()"style="margin-top:30px" >
                                                <i class="fa fa-plus"></i> 
                                            Make A Target Saving
                                            </button>
                                          </div>
                                        </div>
                                      </div>
                                      <!-- <div class="row" *ngIf="adv_filter">
                                        <div class="col-md-3">
                                          <div class="form-group">
                                            <label>Trans. ID:</label>
                                            <input type="text" class="form-control" formControlName="id" placeholder="Invoice Number"/>
                                            <span *ngIf="searching">searching...</span>
                                            <ng-template #st let-s="result" let-t="sterm">
                                              
                                              {{ s.name}}
                                            </ng-template>
                                          </div>
                                        </div>
                                      </div> -->
                                  </form>
                                </div>
                                <div class="container p-2">
                                      <button (click)="exportTable('xls', 'target_savings')" class="btn btn-outline btn-success">Export table</button>
                                      <button class="btn btn-outline btn-success" (click)="printReciept('target_savings')">Print</button>
                                  </div>
                                <table id="target_savings" class="table table-responsive-sm table-hover table-outline mb-0" width="100%">
                                    <thead>
                                        <tr>
                                            <th>#</th>
                                            <th>Name</th>
                                            <th>&#8358; Amount </th>
                                            <th>Date</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr class="" *ngFor="let item of target_list">
                                            <td>00{{ item?.id }}</td>
                                            <td>
                                                {{item.member.first_name}} 
                                                {{item.member.last_name}} 
                                                {{item.member?.middle_name}} 
                                            </td>
                                            <td>
                                                {{item?.amount  | number }} 
                                            </td>
                                            <td>
                                                {{item?.date | date: 'shortDate'}} 
                                            </td>
                                        </tr>
                                        <tr>
                                            <td></td>
                                            <td>
                                               Total
                                            </td>
                                            <td>
                                                {{ total_target_amount  | number }} 
                                            </td>
                                            <td>
                                                 
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </tab>
                    </tabset>
                </div>
            </div>
    </div>
    <!--/.module-body-->
</div>

<!-- new loan type modal -->
<div bsModal #newLoanRequestModal="bs-modal" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="mySmallModalLabel" aria-hidden="true">
     <div class="modal-dialog modal-md">
       <div class="modal-content">
         <div class="modal-header">
           <h4 class="modal-title pull-left">New Loan Request</h4>
           <button type="button" class="close pull-right" aria-label="Close" (click)="newLoanRequestModal.hide()">
             <span aria-hidden="true">&times;</span>
           </button>
         </div>
         <div class="modal-body">
           <div class="new session form">
              <form method="POST" [formGroup] = "loanRequestForm" (ngSubmit) = "makeLoanRequest(loanRequestForm.value)" class="form-horizontal row-fluid">
                <div class="control-group">
                    <label class="col-sm-5">Type Name</label>
                    <div class="col-sm-7">
                        <select class="form-control" formControlName="loan_type">
                            <option value="{{item.id}}" *ngFor="let item of loanTypeList">
                                {{item.loan_type}}
                                <small>{{item.minimum_amount}}- {{item.maximum_amount}} 
                                ({{item.duration}} Months)</small>
                            </option>
                        </select>
                        <small [hidden]="(loanRequestForm.controls.loan_type.valid ) || (loanRequestForm.controls.loan_type.pristine )" class="text-danger">Loan Type Name is Required</small>
                    </div>
                </div>
                <div class="control-group">
                    <label class="col-sm-5">Repayment Method</label>
                    <div class="col-sm-7">
                        <select class="form-control" formControlName="repayment_method">
                          <option value="">Type</option>
                          <option value="{{item.id}}" *ngFor="let item of deduction_type_list">{{ item?.name }}</option>
                        </select>
                         <small [hidden]="(loanRequestForm.controls.repayment_method.valid ) || (loanRequestForm.controls.repayment_method.pristine )" class="text-danger">Method of Repayment Required</small>
                    </div>
                </div>
                <div class="control-group">
                    <label class="col-sm-5">Amount <small>[ NGN ]</small></label>
                    <div class="col-sm-7">
                        <input type="number" formControlName="amount" placeholder="Amount" class="form-control" required="">
                        <small [hidden]="(loanRequestForm.controls.amount.valid ) || (loanRequestForm.controls.amount.pristine )" class="text-danger">Method of Repayment Required</small>
                    </div>
                </div>
                <div class="control-group">
                    <label class="col-sm-5">Description</label>
                    <div class="col-sm-7">
                        <textarea class="form-control" formControlName="description" placeholder="Reasons for loan request"></textarea>
                    </div>
                </div>
                <div class="control-group">
                    <label class="col-sm-5">Requirements</label>
                    <div class="col-sm-7">
                       
                        <input type="file" multiple />
                    </div>
                </div>
                <div><small>please  note that once loans are approve it cannot be canceled</small></div>
                <div class="control-group mbn">
                    <div class="col-sm-12 ">
                        <button type="submit" class="btn btn-success btn-block" [disabled]="loanRequestForm.invalid || submitPending ">
                                <span *ngIf="!submitPending">Create</span>
                                <span *ngIf="submitPending && loanRequestForm.valid">Please Wait...</span>
                                <span *ngIf="submitPending && loanRequestForm.valid" class="fa fa-spinner" aria-hidden="true"></span>
                            </button>
                    </div>
                </div>
            </form>
            </div>
         </div>
       </div>
     </div>
</div>

<div bsModal #newRepaymentModal="bs-modal" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="mySmallModalLabel" aria-hidden="true">
     <div class="modal-dialog modal-md">
       <div class="modal-content">
         <div class="modal-header">
           <h4 class="modal-title pull-left">Make A Repayment</h4>
           <button type="button" class="close pull-right" aria-label="Close" (click)="newRepaymentModal.hide()">
             <span aria-hidden="true">&times;</span>
           </button>
         </div>
         <div class="modal-body">
           <div class="new session form">
                <form [formGroup]="addDeductionForm" (ngSubmit)="make_a_repayment(addDeductionForm.value)">
                            <div class="row">
                                 <div class="col-md-6">
                                    <div class="form-group">
                                        <label>Running Loan(s)</label>
                                        <select class="form-control" placeholder="loan_request_id" formControlName = "loan_request_id">
                                            <option selected="false">Type</option>
                                            <option value="{{ item.id }}" *ngFor="let item of memberLoanRequestList">{{ item?.type?.loan_type}} (bal: = {{item?.amount + percentage_to_amount(item.amount, item.type.interest) - (totalDeductions(item.deductions_per_loan))}})</option>
                                        </select>
                                        <small [hidden]="(addDeductionForm.controls.loan_request_id.valid ) || (addDeductionForm.controls.loan_request_id.pristine )" class="text-danger">Repayment Method is Required</small>
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="form-group">
                                        <label>Type</label>
                                        <select class="form-control" placeholder="type" formControlName = "repayment_method">
                                            <option selected="false">Type</option>
                                            <option value="{{item.id}}" *ngFor="let item of deduction_type_list">{{ item?.name }}</option>
                                        </select>
                                        <small [hidden]="(addDeductionForm.controls.repayment_method.valid ) || (addDeductionForm.controls.repayment_method.pristine )" class="text-danger">Type Method is Required</small>
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="form-group">
                                        <label>Period</label>
                                        <select class="form-control" placeholder="Period" formControlName = "period">
                                            <option selected="false">Period</option>
                                            <option *ngFor="let item of monthList">{{item.name}}/{{ current_year }}</option>
                                        </select>
                                        <small [hidden]="(addDeductionForm.controls.period.valid ) || (addDeductionForm.controls.period.pristine )" class="text-danger">Period  is Required</small>
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="form-group">
                                        <label>Date</label> <small>Date Deduction was made</small>
                                        <input type="date" name="" formControlName = "run_date" class="form-control">
                                        <small [hidden]="(addDeductionForm.controls.run_date.valid ) || (addDeductionForm.controls.run_date.pristine )" class="text-danger">Date you contribution was made is Required</small>
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="form-group">
                                        <label>Amount</label>
                                        <input type="text" name="" formControlName = "repayment_amount" class="form-control">
                                        <small [hidden]="(addDeductionForm.controls.repayment_amount.valid ) || (addDeductionForm.controls.repayment_amount.pristine )" class="text-danger">Amount Required</small>
                                    </div>
                                </div>

                            </div>
                               <button type="submit" class="btn btn-success" [disabled]="addDeductionForm.invalid || submitPending">
                                    <span *ngIf="!submitPending">Run Contribution</span>
                                    <span *ngIf="submitPending && addDeductionForm.valid">Please Wait...</span>
                                    <span *ngIf="submitPending && addDeductionForm.valid" class="fa fa-spinner" aria-hidden="true"></span>
                                </button>
                        </form>
            </div>
         </div>
       </div>
     </div>
</div>

<div bsModal #newTargetSavingModal="bs-modal" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="mySmallModalLabel" aria-hidden="true">
     <div class="modal-dialog modal-md">
       <div class="modal-content">
         <div class="modal-header">
           <h4 class="modal-title pull-left">Make A Target Saving</h4>
           <button type="button" class="close pull-right" aria-label="Close" (click)="newTargetSavingModal.hide()">
             <span aria-hidden="true">&times;</span>
           </button>
         </div>
         <div class="modal-body">
           <div class="new session form">
                <form [formGroup]="targetSavingForm" (ngSubmit)="make_a_target_saving(targetSavingForm.value)">
                    <div class="row">
                        <div class="col-md-6">
                            <div class="form-group">
                                <label>Type</label>
                                <select class="form-control" placeholder="type" formControlName = "payment_method">
                                    <option selected="false">Type</option>
                                    <option value="{{item.id}}" *ngFor="let item of contribution_type_list">{{ item?.name }}</option>
                                </select>
                                <small [hidden]="(targetSavingForm.controls.payment_method.valid ) || (targetSavingForm.controls.payment_method.pristine )" class="text-danger">Type Method is Required</small>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="form-group">
                                <label>Date</label> <small>Date Deduction was made</small>
                                <input type="date" name="" formControlName = "date" class="form-control">
                                <small [hidden]="(targetSavingForm.controls.date.valid ) || (targetSavingForm.controls.date.pristine )" class="text-danger">Date you contribution was made is Required</small>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="form-group">
                                <label>Amount</label>
                                <input type="text" name="" formControlName = "amount" class="form-control">
                                <small [hidden]="(targetSavingForm.controls.amount.valid ) || (targetSavingForm.controls.amount.pristine )" class="text-danger">Amount Required</small>
                            </div>
                        </div>

                    </div>
                       <button type="submit" class="btn btn-success" [disabled]="targetSavingForm.invalid || submitPending">
                            <span *ngIf="!submitPending">Save</span>
                            <span *ngIf="submitPending && targetSavingForm.valid">Please Wait...</span>
                            <span *ngIf="submitPending && targetSavingForm.valid" class="fa fa-spinner" aria-hidden="true"></span>
                        </button>
                </form>
            </div>
         </div>
       </div>
     </div>
</div>

<div bsModal #newWithdrawalModal="bs-modal" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="mySmallModalLabel" aria-hidden="true">
     <div class="modal-dialog modal-md">
       <div class="modal-content">
         <div class="modal-header">
           <h4 class="modal-title pull-left">Make A Withdrawal</h4>
           <button type="button" class="close pull-right" aria-label="Close" (click)="newWithdrawalModal.hide()">
             <span aria-hidden="true">&times;</span>
           </button>
         </div>
         <div class="modal-body">
           <div class="new session form">
                <form [formGroup]="withdrawalForm" (ngSubmit)="make_a_withdrawal(withdrawalForm.value)">
                    <div class="row">
                        <div class="col-md-12">
                            <div class="form-group">
                                <label>Contribution Plan</label>
                                <select class="form-control" placeholder="type" formControlName = "plan_id">
                                    <option selected="false">Type</option>
                                    <option [value]="item.contribution_plan.id" *ngFor="let item of member_plan_list">
                                      {{item?.contribution_plan?.name }}
                                    </option>
                                </select>
                                <small [hidden]="(runContributionForm.controls.type.valid ) || (runContributionForm.controls.type.pristine )" class="text-danger">Period Method is Required</small>
                            </div>
                            <div class="form-group">
                                <label>Amount</label>
                                <input type="text" name="" formControlName = "amount" class="form-control">
                                <small [hidden]="(withdrawalForm.controls.amount.valid ) || (withdrawalForm.controls.amount.pristine )" class="text-danger">Amount Required</small>
                            </div>
                        </div>
                       <!--  <div class="col-md-6">
                            <div class="form-group">
                                <label>Description</label>
                                <textarea formControlName = "description" class="form-control"></textarea>
                            </div>
                        </div> -->
                    </div>
                       <button type="submit" class="btn btn-success" [disabled]="withdrawalForm.invalid || submitPending">
                            <span *ngIf="!submitPending">Save</span>
                            <span *ngIf="submitPending && withdrawalForm.valid">Please Wait...</span>
                            <span *ngIf="submitPending && withdrawalForm.valid" class="fa fa-spinner" aria-hidden="true"></span>
                        </button>
                </form>
            </div>
         </div>
       </div>
     </div>
</div>